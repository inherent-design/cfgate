# cfgate Helm chart values
# Gateway API-native Kubernetes operator for Cloudflare Tunnel, DNS, and Access

# Number of controller replicas
replicaCount: 2

image:
  repository: ghcr.io/inherent-design/cfgate
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""
namespaceOverride: ""

# Install CRDs with the chart
# Set to false if CRDs are managed separately (e.g., via kubectl apply)
installCRDs: true

# Create RBAC resources (ClusterRole, ClusterRoleBinding)
rbac:
  create: true

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # The name of the service account to use
  # If not set and create is true, a name is generated using the fullname template
  name: ""
  # Annotations to add to the service account
  annotations: {}

# Metrics configuration
metrics:
  # Port for the metrics endpoint
  port: 8080
  # Metrics service configuration
  service:
    enabled: true
    port: 8080
    annotations: {}
  # Prometheus ServiceMonitor configuration
  serviceMonitor:
    enabled: false
    # Namespace for the ServiceMonitor (defaults to release namespace)
    namespace: ""
    # Scrape interval
    interval: 30s
    # Additional labels for the ServiceMonitor
    labels: {}

# Health probe configuration
health:
  port: 8081

# Resource requests and limits
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 256Mi

# Container security context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

nodeSelector: {}

tolerations: []

affinity: {}

podAnnotations: {}

podLabels: {}
