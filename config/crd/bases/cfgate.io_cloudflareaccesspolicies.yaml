---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.20.0
  name: cloudflareaccesspolicies.cfgate.io
spec:
  group: cfgate.io
  names:
    kind: CloudflareAccessPolicy
    listKind: CloudflareAccessPolicyList
    plural: cloudflareaccesspolicies
    shortNames:
    - cfap
    - cfaccess
    singular: cloudflareaccesspolicy
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.conditions[?(@.type=='Ready')].status
      name: Ready
      type: string
    - jsonPath: .status.applicationId
      name: Application
      type: string
    - jsonPath: .status.attachedTargets
      name: Targets
      type: integer
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: |-
          CloudflareAccessPolicy is the Schema for the cloudflareaccespolicies API.
          It manages Cloudflare Access Applications and Policies for zero-trust access control.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: CloudflareAccessPolicySpec defines the desired state of CloudflareAccessPolicy.
            properties:
              application:
                description: Application defines the Access Application settings.
                properties:
                  customDenyMessage:
                    description: CustomDenyMessage shown when access is denied.
                    maxLength: 1024
                    type: string
                  customDenyUrl:
                    description: CustomDenyURL redirects to this URL when denied (instead
                      of message).
                    type: string
                  domain:
                    description: Domain is the protected domain (auto-generated from
                      routes if omitted).
                    type: string
                  enableBindingCookie:
                    default: false
                    description: EnableBindingCookie enables binding cookies for sticky
                      sessions.
                    type: boolean
                  httpOnlyCookieAttribute:
                    default: true
                    description: HttpOnlyCookieAttribute adds HttpOnly to session
                      cookies.
                    type: boolean
                  logoUrl:
                    description: LogoURL is the application logo in dashboard.
                    type: string
                  name:
                    description: |-
                      Name is the display name in Cloudflare dashboard.
                      Defaults to CR name if omitted.
                    maxLength: 255
                    type: string
                  path:
                    default: /
                    description: Path restricts protection to specific path prefix.
                    type: string
                  sameSiteCookieAttribute:
                    default: lax
                    description: SameSiteCookieAttribute controls cross-site cookie
                      behavior.
                    enum:
                    - strict
                    - lax
                    - none
                    type: string
                  sessionDuration:
                    default: 24h
                    description: SessionDuration controls session cookie lifetime.
                    pattern: ^[0-9]+(h|m|s)$
                    type: string
                  skipInterstitial:
                    default: false
                    description: SkipInterstitial bypasses the Access login page for
                      API requests.
                    type: boolean
                  type:
                    default: self_hosted
                    description: Type is the application type.
                    enum:
                    - self_hosted
                    - saas
                    - ssh
                    - vnc
                    - browser_isolation
                    type: string
                type: object
              cloudflareRef:
                description: CloudflareRef references Cloudflare credentials (inherits
                  from tunnel if omitted).
                properties:
                  accountId:
                    description: AccountID is the Cloudflare account ID.
                    type: string
                  accountName:
                    description: AccountName is the Cloudflare account name (looked
                      up via API).
                    type: string
                  name:
                    description: Name of the secret containing credentials.
                    minLength: 1
                    type: string
                  namespace:
                    description: Namespace of the secret (defaults to policy namespace).
                    type: string
                required:
                - name
                type: object
              groupRefs:
                description: GroupRefs reference reusable identity rules.
                items:
                  description: AccessGroupRef references an AccessGroup CR or Cloudflare
                    group.
                  properties:
                    cloudflareId:
                      description: CloudflareID of group in Cloudflare (bypasses CR
                        lookup).
                      maxLength: 36
                      type: string
                    name:
                      description: Name of AccessGroup CR in same namespace.
                      maxLength: 253
                      type: string
                  type: object
                  x-kubernetes-validations:
                  - message: either name or cloudflareId must be specified
                    rule: has(self.name) || has(self.cloudflareId)
                maxItems: 50
                type: array
              mtls:
                description: MTLS configures certificate-based authentication.
                properties:
                  associatedHostnames:
                    description: AssociatedHostnames limits mTLS to specific hostnames.
                    items:
                      type: string
                    maxItems: 25
                    type: array
                  enabled:
                    default: false
                    description: Enabled activates mTLS requirement.
                    type: boolean
                  rootCaSecretRef:
                    description: RootCASecretRef references the CA certificate(s)
                      for validation.
                    properties:
                      key:
                        default: ca.crt
                        description: Key within Secret (defaults to ca.crt).
                        type: string
                      name:
                        description: Name of the Secret.
                        minLength: 1
                        type: string
                    required:
                    - name
                    type: object
                  ruleName:
                    description: |-
                      RuleName is the name of the mTLS rule in Cloudflare.
                      Defaults to CR name if omitted.
                    type: string
                required:
                - enabled
                type: object
              policies:
                description: Policies define access rules (evaluated in order).
                items:
                  description: AccessPolicyRule defines an access allow/deny rule.
                  properties:
                    approvalGroups:
                      description: ApprovalGroups defines who can approve access.
                      items:
                        description: ApprovalGroup defines who can approve access
                          requests.
                        properties:
                          approvalsNeeded:
                            default: 1
                            description: ApprovalsNeeded is number of approvals required.
                            minimum: 1
                            type: integer
                          emailDomain:
                            description: EmailDomain allows any user from domain to
                              approve.
                            maxLength: 255
                            type: string
                          emails:
                            description: Emails of approvers.
                            items:
                              type: string
                            maxItems: 50
                            type: array
                        type: object
                        x-kubernetes-validations:
                        - message: at least one approver (emails or emailDomain) must
                            be specified
                          rule: size(self.emails) > 0 || has(self.emailDomain)
                      maxItems: 10
                      type: array
                    approvalRequired:
                      default: false
                      description: ApprovalRequired requires approval from specific
                        users.
                      type: boolean
                    decision:
                      default: allow
                      description: Decision is the policy action.
                      enum:
                      - allow
                      - deny
                      - bypass
                      - non_identity
                      type: string
                    exclude:
                      description: Exclude rules (if ANY match, rule does not apply).
                      items:
                        description: |-
                          AccessRule defines identity matching criteria.
                          SDK types: IPRule, IPListRule, CountryRule, EveryoneRule, ServiceTokenRule, AnyValidServiceTokenRule,
                          EmailRule, DomainRule, EmailListRule, AccessOIDCClaimRule, GSuiteGroupRule.
                        properties:
                          anyValidServiceToken:
                            description: |-
                              AnyValidServiceToken matches any valid service token.
                              SDK: AnyValidServiceTokenRule
                            type: boolean
                          country:
                            description: |-
                              Country matches source country codes (ISO 3166-1 alpha-2).
                              SDK: CountryRule
                            properties:
                              codes:
                                description: Codes are ISO 3166-1 alpha-2 country
                                  codes.
                                items:
                                  type: string
                                maxItems: 50
                                minItems: 1
                                type: array
                            required:
                            - codes
                            type: object
                          email:
                            description: |-
                              Email matches specific email addresses.
                              SDK: EmailRule
                            properties:
                              addresses:
                                description: Addresses to match.
                                items:
                                  type: string
                                maxItems: 50
                                minItems: 1
                                type: array
                            required:
                            - addresses
                            type: object
                          emailDomain:
                            description: |-
                              EmailDomain matches email domain suffix.
                              SDK: DomainRule
                            properties:
                              domain:
                                description: Domain suffix (e.g., "example.com").
                                maxLength: 255
                                minLength: 1
                                type: string
                            required:
                            - domain
                            type: object
                          emailList:
                            description: |-
                              EmailList references a Cloudflare Access email list.
                              SDK: EmailListRule
                            properties:
                              id:
                                description: ID of the Access list in Cloudflare.
                                maxLength: 36
                                type: string
                              name:
                                description: Name of the Access list (looked up via
                                  API).
                                maxLength: 255
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: either id or name must be specified
                              rule: has(self.id) || has(self.name)
                          everyone:
                            description: |-
                              Everyone matches all users (use with caution).
                              SDK: EveryoneRule
                            type: boolean
                          gsuiteGroup:
                            description: |-
                              GSuiteGroup matches Google Workspace groups.
                              SDK: GSuiteGroupRule
                            properties:
                              email:
                                description: Email is the Google Workspace group email.
                                maxLength: 320
                                minLength: 1
                                type: string
                              identityProviderId:
                                description: IdentityProviderID in Cloudflare.
                                maxLength: 36
                                minLength: 1
                                type: string
                            required:
                            - email
                            - identityProviderId
                            type: object
                          ip:
                            description: |-
                              IP matches source IP CIDR ranges.
                              SDK: IPRule
                            properties:
                              ranges:
                                description: Ranges are CIDR blocks (IPv4 or IPv6).
                                items:
                                  type: string
                                maxItems: 50
                                minItems: 1
                                type: array
                            required:
                            - ranges
                            type: object
                          ipList:
                            description: |-
                              IPList references a Cloudflare IP List.
                              SDK: IPListRule
                            properties:
                              id:
                                description: ID of the IP list in Cloudflare.
                                maxLength: 36
                                type: string
                              name:
                                description: Name of the IP list (looked up via API).
                                maxLength: 255
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: either id or name must be specified
                              rule: has(self.id) || has(self.name)
                          oidcClaim:
                            description: |-
                              OIDCClaim matches OIDC token claims.
                              SDK: AccessOIDCClaimRule
                            properties:
                              claimName:
                                description: ClaimName is the OIDC claim to match.
                                maxLength: 255
                                minLength: 1
                                type: string
                              claimValue:
                                description: ClaimValue is the expected value.
                                maxLength: 255
                                minLength: 1
                                type: string
                              identityProviderId:
                                description: IdentityProviderID in Cloudflare.
                                maxLength: 36
                                minLength: 1
                                type: string
                            required:
                            - claimName
                            - claimValue
                            - identityProviderId
                            type: object
                          serviceToken:
                            description: |-
                              ServiceToken matches a specific service token by ID.
                              SDK: ServiceTokenRule
                            properties:
                              tokenId:
                                description: TokenID is the Cloudflare service token
                                  ID.
                                maxLength: 36
                                minLength: 1
                                type: string
                            required:
                            - tokenId
                            type: object
                        type: object
                        x-kubernetes-validations:
                        - message: at least one rule type must be specified
                          rule: '[has(self.ip), has(self.ipList), has(self.country),
                            has(self.everyone), has(self.serviceToken), has(self.anyValidServiceToken),
                            has(self.email), has(self.emailList), has(self.emailDomain),
                            has(self.oidcClaim), has(self.gsuiteGroup)].exists(x,
                            x)'
                      maxItems: 25
                      type: array
                    include:
                      description: Include rules (ANY must match for rule to apply).
                      items:
                        description: |-
                          AccessRule defines identity matching criteria.
                          SDK types: IPRule, IPListRule, CountryRule, EveryoneRule, ServiceTokenRule, AnyValidServiceTokenRule,
                          EmailRule, DomainRule, EmailListRule, AccessOIDCClaimRule, GSuiteGroupRule.
                        properties:
                          anyValidServiceToken:
                            description: |-
                              AnyValidServiceToken matches any valid service token.
                              SDK: AnyValidServiceTokenRule
                            type: boolean
                          country:
                            description: |-
                              Country matches source country codes (ISO 3166-1 alpha-2).
                              SDK: CountryRule
                            properties:
                              codes:
                                description: Codes are ISO 3166-1 alpha-2 country
                                  codes.
                                items:
                                  type: string
                                maxItems: 50
                                minItems: 1
                                type: array
                            required:
                            - codes
                            type: object
                          email:
                            description: |-
                              Email matches specific email addresses.
                              SDK: EmailRule
                            properties:
                              addresses:
                                description: Addresses to match.
                                items:
                                  type: string
                                maxItems: 50
                                minItems: 1
                                type: array
                            required:
                            - addresses
                            type: object
                          emailDomain:
                            description: |-
                              EmailDomain matches email domain suffix.
                              SDK: DomainRule
                            properties:
                              domain:
                                description: Domain suffix (e.g., "example.com").
                                maxLength: 255
                                minLength: 1
                                type: string
                            required:
                            - domain
                            type: object
                          emailList:
                            description: |-
                              EmailList references a Cloudflare Access email list.
                              SDK: EmailListRule
                            properties:
                              id:
                                description: ID of the Access list in Cloudflare.
                                maxLength: 36
                                type: string
                              name:
                                description: Name of the Access list (looked up via
                                  API).
                                maxLength: 255
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: either id or name must be specified
                              rule: has(self.id) || has(self.name)
                          everyone:
                            description: |-
                              Everyone matches all users (use with caution).
                              SDK: EveryoneRule
                            type: boolean
                          gsuiteGroup:
                            description: |-
                              GSuiteGroup matches Google Workspace groups.
                              SDK: GSuiteGroupRule
                            properties:
                              email:
                                description: Email is the Google Workspace group email.
                                maxLength: 320
                                minLength: 1
                                type: string
                              identityProviderId:
                                description: IdentityProviderID in Cloudflare.
                                maxLength: 36
                                minLength: 1
                                type: string
                            required:
                            - email
                            - identityProviderId
                            type: object
                          ip:
                            description: |-
                              IP matches source IP CIDR ranges.
                              SDK: IPRule
                            properties:
                              ranges:
                                description: Ranges are CIDR blocks (IPv4 or IPv6).
                                items:
                                  type: string
                                maxItems: 50
                                minItems: 1
                                type: array
                            required:
                            - ranges
                            type: object
                          ipList:
                            description: |-
                              IPList references a Cloudflare IP List.
                              SDK: IPListRule
                            properties:
                              id:
                                description: ID of the IP list in Cloudflare.
                                maxLength: 36
                                type: string
                              name:
                                description: Name of the IP list (looked up via API).
                                maxLength: 255
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: either id or name must be specified
                              rule: has(self.id) || has(self.name)
                          oidcClaim:
                            description: |-
                              OIDCClaim matches OIDC token claims.
                              SDK: AccessOIDCClaimRule
                            properties:
                              claimName:
                                description: ClaimName is the OIDC claim to match.
                                maxLength: 255
                                minLength: 1
                                type: string
                              claimValue:
                                description: ClaimValue is the expected value.
                                maxLength: 255
                                minLength: 1
                                type: string
                              identityProviderId:
                                description: IdentityProviderID in Cloudflare.
                                maxLength: 36
                                minLength: 1
                                type: string
                            required:
                            - claimName
                            - claimValue
                            - identityProviderId
                            type: object
                          serviceToken:
                            description: |-
                              ServiceToken matches a specific service token by ID.
                              SDK: ServiceTokenRule
                            properties:
                              tokenId:
                                description: TokenID is the Cloudflare service token
                                  ID.
                                maxLength: 36
                                minLength: 1
                                type: string
                            required:
                            - tokenId
                            type: object
                        type: object
                        x-kubernetes-validations:
                        - message: at least one rule type must be specified
                          rule: '[has(self.ip), has(self.ipList), has(self.country),
                            has(self.everyone), has(self.serviceToken), has(self.anyValidServiceToken),
                            has(self.email), has(self.emailList), has(self.emailDomain),
                            has(self.oidcClaim), has(self.gsuiteGroup)].exists(x,
                            x)'
                      maxItems: 25
                      type: array
                    name:
                      description: Name is a human-readable identifier.
                      maxLength: 255
                      minLength: 1
                      type: string
                    precedence:
                      description: Precedence determines rule evaluation order (lower
                        = first).
                      maximum: 9999
                      minimum: 1
                      type: integer
                    purposeJustificationPrompt:
                      description: PurposeJustificationPrompt is the prompt shown
                        to user.
                      type: string
                    purposeJustificationRequired:
                      default: false
                      description: PurposeJustificationRequired requires user to provide
                        justification.
                      type: boolean
                    require:
                      description: Require rules (ALL must match for rule to apply).
                      items:
                        description: |-
                          AccessRule defines identity matching criteria.
                          SDK types: IPRule, IPListRule, CountryRule, EveryoneRule, ServiceTokenRule, AnyValidServiceTokenRule,
                          EmailRule, DomainRule, EmailListRule, AccessOIDCClaimRule, GSuiteGroupRule.
                        properties:
                          anyValidServiceToken:
                            description: |-
                              AnyValidServiceToken matches any valid service token.
                              SDK: AnyValidServiceTokenRule
                            type: boolean
                          country:
                            description: |-
                              Country matches source country codes (ISO 3166-1 alpha-2).
                              SDK: CountryRule
                            properties:
                              codes:
                                description: Codes are ISO 3166-1 alpha-2 country
                                  codes.
                                items:
                                  type: string
                                maxItems: 50
                                minItems: 1
                                type: array
                            required:
                            - codes
                            type: object
                          email:
                            description: |-
                              Email matches specific email addresses.
                              SDK: EmailRule
                            properties:
                              addresses:
                                description: Addresses to match.
                                items:
                                  type: string
                                maxItems: 50
                                minItems: 1
                                type: array
                            required:
                            - addresses
                            type: object
                          emailDomain:
                            description: |-
                              EmailDomain matches email domain suffix.
                              SDK: DomainRule
                            properties:
                              domain:
                                description: Domain suffix (e.g., "example.com").
                                maxLength: 255
                                minLength: 1
                                type: string
                            required:
                            - domain
                            type: object
                          emailList:
                            description: |-
                              EmailList references a Cloudflare Access email list.
                              SDK: EmailListRule
                            properties:
                              id:
                                description: ID of the Access list in Cloudflare.
                                maxLength: 36
                                type: string
                              name:
                                description: Name of the Access list (looked up via
                                  API).
                                maxLength: 255
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: either id or name must be specified
                              rule: has(self.id) || has(self.name)
                          everyone:
                            description: |-
                              Everyone matches all users (use with caution).
                              SDK: EveryoneRule
                            type: boolean
                          gsuiteGroup:
                            description: |-
                              GSuiteGroup matches Google Workspace groups.
                              SDK: GSuiteGroupRule
                            properties:
                              email:
                                description: Email is the Google Workspace group email.
                                maxLength: 320
                                minLength: 1
                                type: string
                              identityProviderId:
                                description: IdentityProviderID in Cloudflare.
                                maxLength: 36
                                minLength: 1
                                type: string
                            required:
                            - email
                            - identityProviderId
                            type: object
                          ip:
                            description: |-
                              IP matches source IP CIDR ranges.
                              SDK: IPRule
                            properties:
                              ranges:
                                description: Ranges are CIDR blocks (IPv4 or IPv6).
                                items:
                                  type: string
                                maxItems: 50
                                minItems: 1
                                type: array
                            required:
                            - ranges
                            type: object
                          ipList:
                            description: |-
                              IPList references a Cloudflare IP List.
                              SDK: IPListRule
                            properties:
                              id:
                                description: ID of the IP list in Cloudflare.
                                maxLength: 36
                                type: string
                              name:
                                description: Name of the IP list (looked up via API).
                                maxLength: 255
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: either id or name must be specified
                              rule: has(self.id) || has(self.name)
                          oidcClaim:
                            description: |-
                              OIDCClaim matches OIDC token claims.
                              SDK: AccessOIDCClaimRule
                            properties:
                              claimName:
                                description: ClaimName is the OIDC claim to match.
                                maxLength: 255
                                minLength: 1
                                type: string
                              claimValue:
                                description: ClaimValue is the expected value.
                                maxLength: 255
                                minLength: 1
                                type: string
                              identityProviderId:
                                description: IdentityProviderID in Cloudflare.
                                maxLength: 36
                                minLength: 1
                                type: string
                            required:
                            - claimName
                            - claimValue
                            - identityProviderId
                            type: object
                          serviceToken:
                            description: |-
                              ServiceToken matches a specific service token by ID.
                              SDK: ServiceTokenRule
                            properties:
                              tokenId:
                                description: TokenID is the Cloudflare service token
                                  ID.
                                maxLength: 36
                                minLength: 1
                                type: string
                            required:
                            - tokenId
                            type: object
                        type: object
                        x-kubernetes-validations:
                        - message: at least one rule type must be specified
                          rule: '[has(self.ip), has(self.ipList), has(self.country),
                            has(self.everyone), has(self.serviceToken), has(self.anyValidServiceToken),
                            has(self.email), has(self.emailList), has(self.emailDomain),
                            has(self.oidcClaim), has(self.gsuiteGroup)].exists(x,
                            x)'
                      maxItems: 25
                      type: array
                    sessionDuration:
                      description: SessionDuration overrides application session duration
                        for this rule.
                      type: string
                  required:
                  - decision
                  - name
                  type: object
                maxItems: 50
                type: array
              serviceTokens:
                description: ServiceTokens for machine-to-machine authentication.
                items:
                  description: ServiceTokenConfig defines machine-to-machine authentication.
                  properties:
                    duration:
                      default: 8760h
                      description: |-
                        Duration is the token validity period using Go duration format.
                        Only hours (h) supported by Cloudflare API. Use "8760h" for 1 year.
                      pattern: ^[0-9]+h$
                      type: string
                    name:
                      description: Name is the token display name.
                      maxLength: 255
                      minLength: 1
                      type: string
                    secretRef:
                      description: SecretRef stores the generated token credentials.
                      properties:
                        name:
                          description: Name of the Secret.
                          minLength: 1
                          type: string
                      required:
                      - name
                      type: object
                  required:
                  - name
                  - secretRef
                  type: object
                maxItems: 10
                type: array
              targetRef:
                description: TargetRef identifies a single target for policy attachment.
                properties:
                  group:
                    default: gateway.networking.k8s.io
                    description: Group is the API group of the target resource.
                    type: string
                  kind:
                    description: Kind is the kind of the target resource.
                    enum:
                    - Gateway
                    - HTTPRoute
                    - GRPCRoute
                    - TCPRoute
                    - UDPRoute
                    type: string
                  name:
                    description: Name is the name of the target resource.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: |-
                      Namespace is the namespace of the target resource.
                      Cross-namespace targeting requires ReferenceGrant.
                    type: string
                  sectionName:
                    description: SectionName targets specific listener (Gateway) or
                      rule (Route).
                    type: string
                required:
                - group
                - kind
                - name
                type: object
                x-kubernetes-validations:
                - message: group must be gateway.networking.k8s.io
                  rule: self.group == 'gateway.networking.k8s.io'
                - message: kind must be Gateway, HTTPRoute, GRPCRoute, TCPRoute, or
                    UDPRoute
                  rule: self.kind in ['Gateway', 'HTTPRoute', 'GRPCRoute', 'TCPRoute',
                    'UDPRoute']
              targetRefs:
                description: TargetRefs identifies multiple targets for policy attachment.
                items:
                  description: |-
                    PolicyTargetReference identifies a target for policy attachment.
                    Based on Gateway API LocalPolicyTargetReferenceWithSectionName.
                  properties:
                    group:
                      default: gateway.networking.k8s.io
                      description: Group is the API group of the target resource.
                      type: string
                    kind:
                      description: Kind is the kind of the target resource.
                      enum:
                      - Gateway
                      - HTTPRoute
                      - GRPCRoute
                      - TCPRoute
                      - UDPRoute
                      type: string
                    name:
                      description: Name is the name of the target resource.
                      maxLength: 253
                      minLength: 1
                      type: string
                    namespace:
                      description: |-
                        Namespace is the namespace of the target resource.
                        Cross-namespace targeting requires ReferenceGrant.
                      type: string
                    sectionName:
                      description: SectionName targets specific listener (Gateway)
                        or rule (Route).
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  type: object
                  x-kubernetes-validations:
                  - message: group must be gateway.networking.k8s.io
                    rule: self.group == 'gateway.networking.k8s.io'
                  - message: kind must be Gateway, HTTPRoute, GRPCRoute, TCPRoute,
                      or UDPRoute
                    rule: self.kind in ['Gateway', 'HTTPRoute', 'GRPCRoute', 'TCPRoute',
                      'UDPRoute']
                maxItems: 16
                type: array
            required:
            - application
            type: object
            x-kubernetes-validations:
            - message: either targetRef or targetRefs must be specified
              rule: has(self.targetRef) || has(self.targetRefs)
            - message: targetRef and targetRefs are mutually exclusive
              rule: '!(has(self.targetRef) && has(self.targetRefs))'
          status:
            description: CloudflareAccessPolicyStatus defines the observed state of
              CloudflareAccessPolicy.
            properties:
              ancestors:
                description: Ancestors contains status for each targetRef (Gateway
                  API PolicyStatus).
                items:
                  description: |-
                    PolicyAncestorStatus describes attachment status per target.
                    Follows Gateway API PolicyAncestorStatus pattern.
                  properties:
                    ancestorRef:
                      description: AncestorRef identifies the target.
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          description: Group is the API group of the target resource.
                          type: string
                        kind:
                          description: Kind is the kind of the target resource.
                          enum:
                          - Gateway
                          - HTTPRoute
                          - GRPCRoute
                          - TCPRoute
                          - UDPRoute
                          type: string
                        name:
                          description: Name is the name of the target resource.
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          description: |-
                            Namespace is the namespace of the target resource.
                            Cross-namespace targeting requires ReferenceGrant.
                          type: string
                        sectionName:
                          description: SectionName targets specific listener (Gateway)
                            or rule (Route).
                          type: string
                      required:
                      - group
                      - kind
                      - name
                      type: object
                      x-kubernetes-validations:
                      - message: group must be gateway.networking.k8s.io
                        rule: self.group == 'gateway.networking.k8s.io'
                      - message: kind must be Gateway, HTTPRoute, GRPCRoute, TCPRoute,
                          or UDPRoute
                        rule: self.kind in ['Gateway', 'HTTPRoute', 'GRPCRoute', 'TCPRoute',
                          'UDPRoute']
                    conditions:
                      description: Conditions for this specific target.
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: |-
                              lastTransitionTime is the last time the condition transitioned from one status to another.
                              This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                            format: date-time
                            type: string
                          message:
                            description: |-
                              message is a human readable message indicating details about the transition.
                              This may be an empty string.
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: |-
                              observedGeneration represents the .metadata.generation that the condition was set based upon.
                              For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                              with respect to the current state of the instance.
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: |-
                              reason contains a programmatic identifier indicating the reason for the condition's last transition.
                              Producers of specific condition types may define expected values and meanings for this field,
                              and whether the values are considered a guaranteed API.
                              The value should be a CamelCase string.
                              This field may not be empty.
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - "True"
                            - "False"
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      type: array
                    controllerName:
                      description: ControllerName identifies the controller managing
                        this attachment.
                      type: string
                  required:
                  - ancestorRef
                  - controllerName
                  type: object
                type: array
              applicationAud:
                description: ApplicationAUD is the Application Audience Tag.
                type: string
              applicationId:
                description: ApplicationID is the Cloudflare Access Application ID.
                type: string
              attachedTargets:
                description: AttachedTargets is the count of successfully attached
                  targets.
                format: int32
                type: integer
              conditions:
                description: Conditions describe current state.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              mtlsRuleId:
                description: MTLSRuleID is the Cloudflare mTLS rule ID.
                type: string
              observedGeneration:
                description: ObservedGeneration is the last generation processed.
                format: int64
                type: integer
              serviceTokenIds:
                additionalProperties:
                  type: string
                description: ServiceTokenIDs maps token names to Cloudflare IDs.
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
